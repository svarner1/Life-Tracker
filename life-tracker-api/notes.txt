Step 4:

 In the routes/auth.js file make the following changes:
   Import the createUserJwt function from the utils/tokens.js file and import the requireAuthenticatedUser middleware
       function from the middleware/security.js file..

   In both the login and register routes, take the user returned by the User model and pass it to the createUserJwt 
      function to generate a token.

   Add the token to the JSON sent back to the client, along with the user.

   Add a GET request to the routes/auth.js file for the /me endpoint.
      Add the requireAuthenticatedUser middleware to that route to only allow authenticated users to
          make requests to it.
          
      It should extract the user from res.locals, take their email, and get the user by calling the fetchUserByEmail
         method on the User model. Make sure to pass it to the makePublicUser method before returning that user to the client.